<!DOCTYPE html>
<html>
<head>
    <title>🤖 Chat System Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; }
        .header { text-align: center; margin-bottom: 30px; }
        .test-section { background: white; padding: 20px; margin: 20px 0; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .button-group { display: flex; flex-wrap: wrap; gap: 10px; margin: 15px 0; }
        button { padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-weight: 500; }
        .btn-primary { background: #3b82f6; color: white; }
        .btn-success { background: #10b981; color: white; }
        .btn-warning { background: #f59e0b; color: white; }
        .btn-danger { background: #ef4444; color: white; }
        .btn-info { background: #8b5cf6; color: white; }
        button:hover { opacity: 0.9; transform: translateY(-1px); }
        .output { margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 5px; border-left: 4px solid #3b82f6; }
        .success { color: #10b981; }
        .error { color: #ef4444; }
        .info { color: #3b82f6; }
        .feature-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin: 20px 0; }
        .feature-card { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .feature-icon { font-size: 2em; margin-bottom: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🤖 Advanced Chat System for E-commerce</h1>
            <p>Comprehensive B2B and B2C Communication Platform</p>
        </div>

        <!-- Authentication Section -->
        <div class="test-section">
            <h2>🔐 Step 1: Authentication Setup</h2>
            <p>Choose your role to test different chat features:</p>
            <div class="button-group">
                <button class="btn-success" onclick="loginAsCustomer()">👤 Login as Customer</button>
                <button class="btn-primary" onclick="loginAsSeller()">🏪 Login as Seller</button>
                <button class="btn-info" onclick="checkAuth()">🔍 Check Current Auth</button>
                <button class="btn-danger" onclick="clearAuth()">🚪 Logout</button>
            </div>
        </div>

        <!-- Chat Features Overview -->
        <div class="test-section">
            <h2>💬 Chat System Features</h2>
            <div class="feature-grid">
                <div class="feature-card">
                    <div class="feature-icon">🤖</div>
                    <h3>AI Assistant</h3>
                    <p>Intelligent chatbot for instant customer support and business insights</p>
                    <ul>
                        <li>Order tracking help</li>
                        <li>Product recommendations</li>
                        <li>Business analytics</li>
                        <li>24/7 availability</li>
                    </ul>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">🏢</div>
                    <h3>B2B Communication</h3>
                    <p>Business-to-business chat for sellers and partners</p>
                    <ul>
                        <li>Supplier communication</li>
                        <li>Partnership discussions</li>
                        <li>Bulk order negotiations</li>
                        <li>Business insights sharing</li>
                    </ul>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">👥</div>
                    <h3>B2C Customer Support</h3>
                    <p>Direct communication between customers and sellers</p>
                    <ul>
                        <li>Product inquiries</li>
                        <li>Order support</li>
                        <li>Return/refund assistance</li>
                        <li>Real-time help</li>
                    </ul>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">🎧</div>
                    <h3>Platform Support</h3>
                    <p>Official customer service and technical support</p>
                    <ul>
                        <li>Account issues</li>
                        <li>Technical problems</li>
                        <li>Platform guidance</li>
                        <li>Escalated support</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Navigation Test -->
        <div class="test-section">
            <h2>🧭 Step 2: Test Dashboard Navigation</h2>
            <p>Navigate to dashboards to see integrated chat functionality:</p>
            <div class="button-group">
                <button class="btn-primary" onclick="goToCustomerDashboard()">👤 Customer Dashboard</button>
                <button class="btn-success" onclick="goToSellerDashboard()">🏪 Seller Dashboard</button>
                <button class="btn-info" onclick="goToCustomerMessages()">💬 Customer Messages</button>
                <button class="btn-warning" onclick="goToSellerMessages()">📨 Seller Messages</button>
            </div>
        </div>

        <!-- Chat Types Test -->
        <div class="test-section">
            <h2>🎯 Step 3: Chat Type Demonstrations</h2>
            <p>Different chat types available based on user role:</p>
            
            <h3>👤 Customer Chat Options:</h3>
            <div class="button-group">
                <button class="btn-warning" onclick="testBotChat()">🤖 AI Assistant Chat</button>
                <button class="btn-success" onclick="testB2CChat()">🛍️ Contact Seller</button>
                <button class="btn-info" onclick="testSupportChat()">🎧 Customer Support</button>
            </div>
            
            <h3>🏪 Seller Chat Options:</h3>
            <div class="button-group">
                <button class="btn-primary" onclick="testB2BChat()">🏢 Business Chat</button>
                <button class="btn-success" onclick="testSellerB2CChat()">👥 Customer Support</button>
                <button class="btn-warning" onclick="testSellerBotChat()">🤖 Business AI Assistant</button>
            </div>
        </div>

        <!-- Features Test -->
        <div class="test-section">
            <h2>⚡ Step 4: Advanced Features</h2>
            <div class="button-group">
                <button class="btn-info" onclick="testFloatingChat()">💬 Floating Chat Button</button>
                <button class="btn-primary" onclick="testChatNotifications()">🔔 Chat Notifications</button>
                <button class="btn-success" onclick="testChatSearch()">🔍 Chat Search & Filter</button>
                <button class="btn-warning" onclick="testChatHistory()">📚 Chat History</button>
            </div>
        </div>

        <div id="output" class="output"></div>
    </div>

    <script>
        function loginAsCustomer() {
            const customerAuth = {
                state: {
                    user: {
                        id: "customer123",
                        name: "John Customer",
                        email: "customer@example.com",
                        role: "CUSTOMER",
                        isActive: true,
                        isEmailVerified: true
                    },
                    token: "fake-customer-jwt-token",
                    isAuthenticated: true
                },
                version: 0
            };
            
            localStorage.setItem('auth-storage', JSON.stringify(customerAuth));
            showOutput('✅ Logged in as Customer! You can now access B2C chats, AI assistant, and customer support.', 'success');
        }
        
        function loginAsSeller() {
            const sellerAuth = {
                state: {
                    user: {
                        id: "seller123",
                        name: "Fashion Store Owner",
                        email: "seller@fashionstore.com",
                        role: "SELLER",
                        storeName: "Fashion Era Store",
                        isActive: true,
                        isEmailVerified: true
                    },
                    token: "fake-seller-jwt-token",
                    isAuthenticated: true
                },
                version: 0
            };
            
            localStorage.setItem('auth-storage', JSON.stringify(sellerAuth));
            showOutput('✅ Logged in as Seller! You can now access B2B chats, customer support management, and business AI assistant.', 'success');
        }
        
        function checkAuth() {
            const authData = localStorage.getItem('auth-storage');
            if (authData) {
                try {
                    const parsed = JSON.parse(authData);
                    const user = parsed.state?.user;
                    if (user) {
                        showOutput(`
                            <h3>Current User:</h3>
                            <p><strong>Name:</strong> ${user.name}</p>
                            <p><strong>Role:</strong> ${user.role}</p>
                            <p><strong>Store:</strong> ${user.storeName || 'N/A'}</p>
                            <p><strong>Available Chats:</strong> ${getAvailableChats(user.role)}</p>
                        `, 'info');
                    }
                } catch (e) {
                    showOutput('❌ Error parsing auth data', 'error');
                }
            } else {
                showOutput('❌ Not logged in. Please login to test chat features.', 'error');
            }
        }
        
        function getAvailableChats(role) {
            if (role === 'SELLER') {
                return 'B2B Business Chat, B2C Customer Support, AI Business Assistant';
            } else if (role === 'CUSTOMER') {
                return 'B2C Contact Seller, Customer Support, AI Shopping Assistant';
            }
            return 'None';
        }
        
        function clearAuth() {
            localStorage.removeItem('auth-storage');
            showOutput('🚪 Logged out successfully!', 'info');
        }
        
        function goToCustomerDashboard() {
            window.open('http://localhost:5174/customer-dashboard', '_blank');
            showOutput('🚀 Opening Customer Dashboard with integrated chat system...', 'info');
        }
        
        function goToSellerDashboard() {
            window.open('http://localhost:5174/seller-dashboard', '_blank');
            showOutput('🚀 Opening Seller Dashboard with integrated chat system...', 'info');
        }
        
        function goToCustomerMessages() {
            window.open('http://localhost:5174/customer-dashboard?tab=messages', '_blank');
            showOutput('💬 Opening Customer Messages tab...', 'info');
        }
        
        function goToSellerMessages() {
            window.open('http://localhost:5174/seller-dashboard?tab=messages', '_blank');
            showOutput('📨 Opening Seller Messages tab...', 'info');
        }
        
        function testBotChat() {
            showOutput('🤖 AI Assistant Chat: Provides instant help with orders, products, and shopping guidance. Features smart responses and 24/7 availability.', 'info');
        }
        
        function testB2CChat() {
            showOutput('🛍️ B2C Contact Seller: Direct communication with product sellers for inquiries, support, and product questions.', 'info');
        }
        
        function testSupportChat() {
            showOutput('🎧 Customer Support: Official platform support for account issues, technical problems, and escalated support.', 'info');
        }
        
        function testB2BChat() {
            showOutput('🏢 B2B Business Chat: Communication between businesses for partnerships, supplier relations, and bulk orders.', 'info');
        }
        
        function testSellerB2CChat() {
            showOutput('👥 Seller Customer Support: Help customers with product questions, orders, and provide excellent customer service.', 'info');
        }
        
        function testSellerBotChat() {
            showOutput('🤖 Business AI Assistant: Get business insights, analytics help, and operational guidance for your store.', 'info');
        }
        
        function testFloatingChat() {
            showOutput('💬 Floating Chat Button: Always accessible chat button in bottom-right corner with unread message notifications.', 'info');
        }
        
        function testChatNotifications() {
            showOutput('🔔 Chat Notifications: Real-time notifications for new messages with unread count badges and sound alerts.', 'info');
        }
        
        function testChatSearch() {
            showOutput('🔍 Chat Search & Filter: Search conversations by content, filter by chat type (B2B, B2C, Support, Bot).', 'info');
        }
        
        function testChatHistory() {
            showOutput('📚 Chat History: Persistent chat history with message timestamps, read status, and conversation management.', 'info');
        }
        
        function showOutput(message, type = 'info') {
            const output = document.getElementById('output');
            output.innerHTML = `<div class="${type}">${message}</div>`;
        }
    </script>
</body>
</html>
